{"version":3,"sources":["core/fixedPrices","Config.js","auth/index.js","core/Menu.js","core/cartHelperss.js","core/Layout.js","user/Signup.js","user/Signin.js","core/apiCore.js","core/ShowImage.js","core/Card.js","core/Search.js","core/Home.js","auth/PrivateRoute.js","user/UserDashboard.js","auth/AdminRoute.js","user/AdminDashboard.js","admin/AddCategory.js","admin/apiAdmin.js","admin/AddTrain.js","core/Checkbox.js","core/Shop.js","core/Train.js","core/Checkout.js","core/Cart.js","Routes.js","index.js"],"names":["module","exports","__webpack_require__","p","API","process","env","REACT_APP_API_URL","isAuthenticated","window","localStorage","getItem","JSON","parse","isActive","history","path","location","pathname","color","withRouter","_ref","react_default","a","createElement","className","react_router_dom","style","to","length","user","role","react","cursor","onClick","next","removeItem","fetch","concat","method","then","respose","console","log","catch","err","signout","push","Layout","title","description","children","core_Menu","Signup","_useState","useState","name","email","password","error","success","_useState2","Object","slicedToArray","values","setValues","handleChange","event","objectSpread2","defineProperty","target","value","clickSubmit","preventDefault","headers","Accept","Content-Type","body","stringify","response","json","data","core_Layout","display","marginTop","onChange","type","Signin","loading","redirectToReferrer","setItem","authenticate","react_router","getTrains","sortBy","getCategories","getFilteredTrains","skip","limit","filters","arguments","undefined","ShowImage","item","url","src","_id","alt","maxHeight","maxWidth","Card","train","_ref$showViewTrainBut","showViewTrainButton","_ref$showAddToCartBut","showAddToCartButton","_ref$cartUpdate","cartUpdate","_ref$showRemoveProduc","showRemoveProductButton","_ref$setRun","setRun","f","_ref$run","run","redirect","setRedirect","_useState3","count","_useState4","setCount","addToCart","cart","Array","from","Set","map","id","find","addItem","productId","product","i","updateItem","shouldRedirect","core_ShowImage","price","category","departFrom","destination","depatureDate","depatureTime","arrivalDate","arrivalTime","moment","createdAt","fromNow","noOfSeats","showViewButton","showAddToCartBtn","trainId","splice","showRemoveButton","showCartUpdateOptions","Search","categories","search","results","searched","setData","useEffect","searchData","params","query","queryString","list","searchSubmit","e","_objectSpread2","onSubmit","c","key","placeholder","border","searchMessage","core_Card","searchedProducts","Home","setTrainsBySell","trainsByArrival","setTrainsByArrival","_useState5","_useState6","setError","core_Search","PrivateRoute","Component","component","rest","objectWithoutProperties","assign","render","props","state","Dashboard","_isAuthenticated$user","AdminRoute","AdminDashboard","AddCategory","setName","setSuccess","_isAuthenticated","token","userId","Authorization","createCategory","showSuccess","showError","autoFocus","required","AddTrain","photo","createdTrain","redirectToProfile","formData","init","FormData","files","set","createTrain","quantity","accept","Checkbox","handleFilters","checked","setCheked","handleToggle","currentCategoryId","indexOf","newCheckedCategoryId","toConsumableArray","Shop","depature","myFilters","setMyFilters","setCategories","_useState7","_useState8","_useState9","_useState10","setSkip","_useState11","_useState12","size","setSize","_useState13","_useState14","filteredResults","setFilteredResults","loadFilteredResults","newFilters","loadMore","toSkip","handlePrice","prices","array","parseInt","core_Checkbox","filterBy","priceValues","Train","setTrain","setRelatedTrain","loadSingleTrain","read","match","substring","marginLeft","Checkout","trains","clientToken","instance","address","getToken","getBraintreeClientToken","handleAddress","getTotal","reduce","currentValue","nextValue","deliveryAddress","buy","requestPaymentMethod","paymentData","paymentMethodNonce","nonce","amount","processPayment","createOrderData","products","transaction_id","transaction","order","createOrder","message","showDropIn","onBlur","lib_default","options","authorization","paypal","flow","onInstance","Cart","items","setItems","showItems","core_Checkout","Routes","exact","auth_PrivateRoute","auth_AdminRoute","ReactDOM","StrictMode","src_Routes","document","getElementById"],"mappings":"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","file":"static/js/main.0f494e2f.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/fixedPrices.80734fc4.bin\";","import {Argv as process} from \"@jest/types/build/Config\";\r\n\r\nexport const API = process.env.REACT_APP_API_URL","import { API } from '../Config';\r\n\r\nexport const signup = user => {\r\n    return fetch(`${API}/signup`, {\r\n        method: 'POST',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(user)\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        });\r\n};\r\n\r\nexport const signin = user => {\r\n    return fetch(`${API}/signin`, {\r\n        method: 'POST',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(user)\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        });\r\n};\r\n\r\nexport const authenticate = (data,next) => {\r\n    if (typeof window !== 'undefined'){\r\n        localStorage.setItem('jwt',JSON.stringify(data))\r\n        next()\r\n    }\r\n}\r\n\r\nexport const signout = (next) => {\r\n    if (typeof window !== \"undefined\"){\r\n        localStorage.removeItem(\"jwt\");\r\n        next();\r\n        return fetch(`${API}/signout`, {\r\n            method: \"GET\"\r\n        })\r\n            .then(respose => {\r\n                console.log('signout',respose)\r\n            })\r\n            .catch(err => console.log(err))\r\n    }\r\n}\r\n\r\nexport const isAuthenticated = () => {\r\n    if (typeof window == 'undefined') {\r\n        return false;\r\n    }\r\n    if (localStorage.getItem('jwt')) {\r\n        return JSON.parse(localStorage.getItem('jwt'));\r\n    } else {\r\n        return false;\r\n    }\r\n};","import React, { Fragment } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport { signout, isAuthenticated } from \"../auth\";\r\nimport { itemTotal } from \"./cartHelperss\";\r\n\r\nconst isActive = (history, path) => {\r\n    if (history.location.pathname === path) {\r\n        return { color: \"#ff9900\" };\r\n    } else {\r\n        return { color: \"#ffffff\" };\r\n    }\r\n};\r\n\r\nconst Menu = ({ history }) => (\r\n\r\n    <div className=\"mb-5\">\r\n        <ul className=\"nav nav-tabs bg-dark\">\r\n            <li className=\"nav-item\">\r\n                <Link\r\n                    className=\"nav-link\"\r\n                    style={isActive(history, \"/\")}\r\n                    to=\"/\"\r\n                >\r\n                    Home\r\n                </Link>\r\n            </li>\r\n\r\n            <li className=\"nav-item\">\r\n                <Link\r\n                    className=\"nav-link\"\r\n                    style={isActive(history, \"/shop\")}\r\n                    to=\"/shop\"\r\n                >\r\n                    Filter\r\n                </Link>\r\n            </li>\r\n\r\n            <li className=\"nav-item\">\r\n                <Link\r\n                    className=\"nav-link\"\r\n                    style={isActive(history, \"/cart\")}\r\n                    to=\"/cart\"\r\n                >\r\n                    My Tickets{\" \"}\r\n                    <sup>\r\n                        <small className=\"cart-badge\">{itemTotal()}</small>\r\n                    </sup>\r\n                </Link>\r\n            </li>\r\n\r\n            {isAuthenticated() && isAuthenticated().user.role === 0 && (\r\n                <li className=\"nav-item\">\r\n                    <Link\r\n                        className=\"nav-link\"\r\n                        style={isActive(history, \"/user/dashboard\")}\r\n                        to=\"/user/dashboard\"\r\n                    >\r\n                        Dashboard\r\n                    </Link>\r\n                </li>\r\n            )}\r\n\r\n            {isAuthenticated() && isAuthenticated().user.role === 1 && (\r\n                <li className=\"nav-item\">\r\n                    <Link\r\n                        className=\"nav-link\"\r\n                        style={isActive(history, \"/admin/dashboard\")}\r\n                        to=\"/admin/dashboard\"\r\n                    >\r\n                        Dashboard\r\n                    </Link>\r\n                </li>\r\n            )}\r\n\r\n            {!isAuthenticated() && (\r\n                <Fragment>\r\n                    <li className=\"nav-item\">\r\n                        <Link\r\n                            className=\"nav-link\"\r\n                            style={isActive(history, \"/signin\")}\r\n                            to=\"/signin\"\r\n                        >\r\n                            Signin\r\n                        </Link>\r\n                    </li>\r\n\r\n                    <li className=\"nav-item\">\r\n                        <Link\r\n                            className=\"nav-link\"\r\n                            style={isActive(history, \"/signup\")}\r\n                            to=\"/signup\"\r\n                        >\r\n                            Signup\r\n                        </Link>\r\n                    </li>\r\n                </Fragment>\r\n            )}\r\n\r\n            {isAuthenticated() && (\r\n                <li className=\"nav-item\">\r\n                    <span\r\n                        className=\"nav-link\"\r\n                        style={{ cursor: \"pointer\", color: \"#ffffff\" }}\r\n                        onClick={() =>\r\n                            signout(() => {\r\n                                history.push(\"/\");\r\n                            })\r\n                        }\r\n                    >\r\n                        Signout\r\n                    </span>\r\n                </li>\r\n            )}\r\n        </ul>\r\n    </div>\r\n);\r\n\r\nexport default withRouter(Menu);","export const addItem = (item = [], count = 0, next = f => f) => {\r\n    let cart = [];\r\n    if (typeof window !== 'undefined') {\r\n        if (localStorage.getItem('cart')) {\r\n            cart = JSON.parse(localStorage.getItem('cart'));\r\n        }\r\n        cart.push({\r\n            ...item,\r\n            count: 1\r\n        });\r\n\r\n        // remove duplicates\r\n        // build an Array from new Set and turn it back into array using Array.from\r\n        // so that later we can re-map it\r\n        // new set will only allow unique values in it\r\n        // so pass the ids of each object/product\r\n        // If the loop tries to add the same value again, it'll get ignored\r\n        // ...with the array of ids we got on when first map() was used\r\n        // run map() on it again and return the actual product from the cart\r\n\r\n        cart = Array.from(new Set(cart.map(p => p._id))).map(id => {\r\n            return cart.find(p => p._id === id);\r\n        });\r\n\r\n        localStorage.setItem('cart', JSON.stringify(cart));\r\n        next();\r\n    }\r\n};\r\n\r\nexport const itemTotal = () => {\r\n    if (typeof window !== 'undefined') {\r\n        if (localStorage.getItem('cart')) {\r\n            return JSON.parse(localStorage.getItem('cart')).length;\r\n        }\r\n    }\r\n    return 0;\r\n};\r\n\r\nexport const getCart = () => {\r\n    if (typeof window !== 'undefined') {\r\n        if (localStorage.getItem('cart')) {\r\n            return JSON.parse(localStorage.getItem('cart'));\r\n        }\r\n    }\r\n    return [];\r\n};\r\n\r\nexport const updateItem = (productId, count) => {\r\n    let cart = [];\r\n    if (typeof window !== 'undefined') {\r\n        if (localStorage.getItem('cart')) {\r\n            cart = JSON.parse(localStorage.getItem('cart'));\r\n        }\r\n\r\n        cart.map((product, i) => {\r\n            if (product._id === productId) {\r\n                cart[i].count = count;\r\n            }\r\n        });\r\n\r\n        localStorage.setItem('cart', JSON.stringify(cart));\r\n    }\r\n};\r\n\r\nexport const removeItem = trainId => {\r\n    let cart = [];\r\n    if (typeof window !== 'undefined') {\r\n        if (localStorage.getItem('cart')) {\r\n            cart = JSON.parse(localStorage.getItem('cart'));\r\n        }\r\n\r\n        cart.map((train, i) => {\r\n            if (train._id === trainId) {\r\n                cart.splice(i, 1);\r\n            }\r\n        });\r\n\r\n        localStorage.setItem('cart', JSON.stringify(cart));\r\n    }\r\n    return cart;\r\n};\r\n\r\nexport const emptyCart = next => {\r\n    if (typeof window !== 'undefined') {\r\n        localStorage.removeItem('cart');\r\n        next();\r\n    }\r\n};","import React from \"react\";\r\nimport Menu from \"./Menu\";\r\nimport \"../style.css\";\r\n\r\nconst Layout = ({\r\n                    title = \"Title\",\r\n                    description = \"Description\",\r\n                    className,\r\n                    children\r\n                }) => (\r\n    <div>\r\n        <Menu/>\r\n\r\n        <div className={className}>{children}</div>\r\n    </div>\r\n);\r\n\r\nexport default Layout;","import React, {useState} from 'react';\r\nimport Layout from \"../core/Layout\";\r\nimport {Link} from \"react-router-dom\";\r\nimport {signup} from '../auth';\r\n\r\nconst Signup = () => {\r\n    const [values,setValues] = useState({\r\n        name: '',\r\n        email: '',\r\n        password: '',\r\n        error: '',\r\n        success: false\r\n    });\r\n\r\n    const {name,email,password,success,error} = values;\r\n\r\n    const handleChange = name => event => {\r\n        setValues({ ...values, error: false, [name]: event.target.value });\r\n    };\r\n\r\n    const clickSubmit = event => {\r\n        event.preventDefault();\r\n        setValues({ ...values, error: false });\r\n        signup({ name, email, password }).then(data => {\r\n            if (data.error) {\r\n                setValues({ ...values, error: data.error, success: false });\r\n            } else {\r\n                setValues({\r\n                    ...values,\r\n                    name: '',\r\n                    email: '',\r\n                    password: '',\r\n                    error: '',\r\n                    success: true\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    const signupForm = () => (\r\n        <form style={{marginTop:\"15%\"}}>\r\n            <h1 className=\"text-center\">Signup</h1>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Name</label>\r\n                <input onChange={handleChange('name')} type=\"text\" className=\"form-control\" value={name} />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Email</label>\r\n                <input onChange={handleChange('email')} type=\"email\" className=\"form-control\" value={email} />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Password</label>\r\n                <input onChange={handleChange('password')} type=\"password\" className=\"form-control\" value={password} />\r\n            </div>\r\n            <button onClick={clickSubmit} className=\"btn btn-primary btn-lg btn-lg btn-block\">\r\n                Submit\r\n            </button>\r\n        </form>\r\n    );\r\n\r\n\r\n    const showError = () => {\r\n        return(\r\n            <div className=\"alert alert-danger\" style={{display:error ? '' : 'none'}}>{error}</div>\r\n        )\r\n    }\r\n\r\n    const showSuccess = () => {\r\n        return(\r\n            <div className=\"alert alert-info\" style={{display:success ? '' : 'none'}}>New account is created. Please <Link to='/signin'>Signin</Link></div>\r\n        )\r\n    }\r\n\r\n    return(\r\n        <Layout title=\"Sign in\" description=\"Node React E-commerce App\" className=\"container col-md-8 offset-md-2\">\r\n            {showSuccess()}\r\n            {showError()}\r\n            {signupForm()}\r\n        </Layout>\r\n    )\r\n}\r\n\r\nexport default Signup;","import React, {useState} from 'react';\r\nimport Layout from \"../core/Layout\";\r\nimport {Link,Redirect} from \"react-router-dom\";\r\nimport {signin,authenticate,isAuthenticated} from '../auth';\r\n\r\nconst Signin = () => {\r\n    const [values,setValues] = useState({\r\n        email: '',\r\n        password: '',\r\n        error: '',\r\n        loading: false,\r\n        redirectToReferrer:false\r\n    });\r\n\r\n    const {email,password,loading,error,redirectToReferrer} = values;\r\n    const {user} = isAuthenticated()\r\n\r\n    const handleChange = name => event => {\r\n        setValues({ ...values, error: false, [name]: event.target.value });\r\n    };\r\n\r\n    const clickSubmit = event => {\r\n        event.preventDefault();\r\n        setValues({ ...values, error: false,loading: true });\r\n        signin({email, password }).then(data => {\r\n            if (data.error) {\r\n                setValues({ ...values, error: data.error, loading: false });\r\n            } else {\r\n                authenticate(data, () => {\r\n                    setValues({\r\n                        ...values,\r\n                        redirectToReferrer: true\r\n                    });\r\n                })\r\n            }\r\n        });\r\n    }\r\n\r\n    const signupForm = () => (\r\n        <form style={{marginTop:\"15%\"}}>\r\n            <h1 className=\"text-center\">Signin</h1>\r\n                <div className=\"form-group\">\r\n                    <label className=\"text-muted\">Email</label>\r\n                    <input onChange={handleChange('email')} type=\"email\" className=\"form-control\" value={email} />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label className=\"text-muted\">Password</label>\r\n                    <input onChange={handleChange('password')} type=\"password\" className=\"form-control\" value={password} />\r\n                </div>\r\n                <button onClick={clickSubmit} className=\"btn btn-primary btn-lg btn-block\">\r\n                    Submit\r\n                </button>\r\n            </form>\r\n\r\n    );\r\n\r\n\r\n    const showError = () => {\r\n        return(\r\n            <div className=\"alert alert-danger\" style={{display:error ? '' : 'none'}}>{error}</div>\r\n        )\r\n    }\r\n\r\n    const showLoading = () =>\r\n        loading && (\r\n            <div className=\"alert alert-info\">\r\n                <h2>Loading...</h2>\r\n            </div>\r\n        )\r\n\r\n    const redirectUser = () => {\r\n        if (redirectToReferrer){\r\n            if (user && user.role === 1){\r\n                return <Redirect to=\"/admin/dashboard\"/>\r\n            }else{\r\n                return <Redirect to=\"/user/dashboard\"/>\r\n            }\r\n        }\r\n        if (isAuthenticated()){\r\n            return(\r\n                <Redirect to=\"/\"/>\r\n                )\r\n        }\r\n    }\r\n\r\n    return(\r\n        <Layout title=\"Sign in\" description=\"Node React E-commerce App\" className=\"container col-md-8 offset-md-2\">\r\n            {showLoading()}\r\n            {showError()}\r\n            {signupForm()}\r\n            {redirectUser()}\r\n        </Layout>\r\n    )\r\n}\r\n\r\nexport default Signin;","import { API } from \"../Config\";\r\nimport queryString from \"query-string\";\r\n\r\nexport const getTrains = sortBy => {\r\n    return fetch(`${API}/trains?sortBy=${sortBy}&order=desc&limit=6`, {\r\n        method: \"GET\"\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const getCategories = () => {\r\n    return fetch(`${API}/categories`, {\r\n        method: \"GET\"\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const getDepature = () => {\r\n    return fetch(`${API}/trains`, {\r\n        method: \"GET\"\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const getFilteredTrains = (skip, limit, filters = {}) => {\r\n    const data = {\r\n        limit,\r\n        skip,\r\n        filters\r\n    };\r\n    return fetch(`${API}/trains/by/search`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify(data)\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        });\r\n};\r\n\r\nexport const list = params => {\r\n    const query = queryString.stringify(params);\r\n    console.log(\"query\", query);\r\n    return fetch(`${API}/trains/search?${query}`, {\r\n        method: \"GET\"\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const read = trainId => {\r\n    return fetch(`${API}/train/${trainId}`, {\r\n        method: \"GET\"\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const listRelated = trainId => {\r\n    return fetch(`${API}/trains/related/${trainId}`, {\r\n        method: \"GET\"\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const getBraintreeClientToken = (userId, token) => {\r\n    return fetch(`${API}/braintree/getToken/${userId}`, {\r\n        method: \"GET\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        }\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const processPayment = (userId, token, paymentData) => {\r\n    return fetch(`${API}/braintree/payment/${userId}`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(paymentData)\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const createOrder = (userId, token, createOrderData) => {\r\n    return fetch(`${API}/order/create/${userId}`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ order: createOrderData })\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};","import React from \"react\";\r\nimport {API} from \"../Config\";\r\n\r\nconst ShowImage = ({item,url}) => (\r\n    <div className=\"product-img\">\r\n        <img src={`${API}/${url}/photo/${item._id}`} alt={item.name} className=\"mb-3\" style={{maxHeight:'100%',maxWidth:'100%'}}/>\r\n    </div>\r\n);\r\n\r\nexport default ShowImage","import React, { useState } from 'react';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport ShowImage from './ShowImage';\r\nimport moment from 'moment';\r\nimport { addItem, updateItem, removeItem } from './cartHelperss';\r\n\r\nconst Card = ({\r\n                  train,\r\n                  showViewTrainButton = true,\r\n                  showAddToCartButton = true,\r\n                  cartUpdate = false,\r\n                  showRemoveProductButton = false,\r\n                  setRun = f => f,\r\n                  run = undefined\r\n                  // changeCartSize\r\n              }) => {\r\n    const [redirect, setRedirect] = useState(false);\r\n    const [count, setCount] = useState(train.count);\r\n\r\n    const showViewButton = showViewTrainButton => {\r\n        return (\r\n            showViewTrainButton && (\r\n                <Link to={`/train/${train._id}`} className=\"mr-2\">\r\n                    <button className=\"btn btn-primary btn-lg btn-block mt-2 mb-2 card-btn-1\">View Train</button>\r\n                </Link>\r\n            )\r\n        );\r\n    };\r\n    const addToCart = () => {\r\n        // console.log('added');\r\n        addItem(train, setRedirect(true));\r\n    };\r\n\r\n    const shouldRedirect = redirect => {\r\n        if (redirect) {\r\n            return <Redirect to=\"/cart\" />;\r\n        }\r\n    };\r\n\r\n    const showAddToCartBtn = showAddToCartButton => {\r\n        return (\r\n            showAddToCartButton && (\r\n                <button onClick={addToCart} className=\"btn btn-warning btn-lg btn-block mt-2 mb-2 card-btn-1\">\r\n                    Buy\r\n                </button>\r\n            )\r\n        );\r\n    };\r\n\r\n    const showStock = noOfSeats => {\r\n        return noOfSeats > 0 ? (\r\n            <span className=\"badge badge-primary badge-pill\">Available </span>\r\n        ) : (\r\n            <span className=\"badge badge-primary badge-pill\">Not Available </span>\r\n        );\r\n    };\r\n\r\n    const handleChange = productId => event => {\r\n        setRun(!run); // run useEffect in parent Cart\r\n        setCount(event.target.value < 1 ? 1 : event.target.value);\r\n        if (event.target.value >= 1) {\r\n            updateItem(productId, event.target.value);\r\n        }\r\n    };\r\n\r\n    const showCartUpdateOptions = cartUpdate => {\r\n        return (\r\n            cartUpdate && (\r\n                <div>\r\n                    <div className=\"input-group mb-3\">\r\n                        <div className=\"input-group-prepend\">\r\n                            <span className=\"input-group-text\">Adjust Quantity</span>\r\n                        </div>\r\n                        <input type=\"number\" className=\"form-control\" value={count} onChange={handleChange(train._id)} />\r\n                    </div>\r\n                </div>\r\n            )\r\n        );\r\n    };\r\n    const showRemoveButton = showRemoveProductButton => {\r\n        return (\r\n            showRemoveProductButton && (\r\n                <button\r\n                    onClick={() => {\r\n                        removeItem(train._id);\r\n                        setRun(!run); // run useEffect in parent Cart\r\n                    }}\r\n                    className=\"btn btn-danger btn-lg btn-block mt-2 mb-2\"\r\n                >\r\n                    Remove Product\r\n                </button>\r\n            )\r\n        );\r\n    };\r\n    return (\r\n        <div className=\"card \">\r\n            <div className=\"card-header card-header-1 \">{train.name}</div>\r\n            <div className=\"card-body\">\r\n                {shouldRedirect(redirect)}\r\n                <ShowImage item={train} url=\"train\" />\r\n                <p className=\"card-p black-10\">Rs.{train.price}</p>\r\n                <p className=\"black-9\">Category: {train.category && train.category.name}</p>\r\n                <p className=\"black-9\">Depature: {train.departFrom}</p>\r\n                <p className=\"black-9\">Destination: {train.destination}</p>\r\n                <p className=\"black-9\">Depature Date/Time: {train.depatureDate} / {train.depatureTime}</p>\r\n                <p className=\"black-9\">Arrival Date/Time: {train.arrivalDate} / {train.arrivalTime}</p>\r\n                <p className=\"black-8\">Added on {moment(train.createdAt).fromNow()}</p>\r\n                {showStock(train.noOfSeats)}\r\n                <br />\r\n\r\n                {showViewButton(showViewTrainButton)}\r\n\r\n                {showAddToCartBtn(showAddToCartButton)}\r\n\r\n                {showRemoveButton(showRemoveProductButton)}\r\n\r\n                {showCartUpdateOptions(cartUpdate)}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Card;","import React, { useState, useEffect } from \"react\";\r\nimport { getCategories, list } from \"./apiCore\";\r\nimport Card from \"./Card\";\r\n\r\nconst Search = () => {\r\n    const [data, setData] = useState({\r\n        categories: [],\r\n        category: \"\",\r\n        search: \"\",\r\n        results: [],\r\n        searched: false\r\n    });\r\n\r\n    const { categories, category, search, results, searched } = data;\r\n\r\n    const loadCategories = () => {\r\n        getCategories().then(data => {\r\n            if (data.error) {\r\n                console.log(data.error);\r\n            } else {\r\n                setData({ ...data, categories: data });\r\n            }\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        loadCategories();\r\n    }, []);\r\n\r\n    const searchData = () => {\r\n        // console.log(search, category);\r\n        if (search) {\r\n            list({ search: search || undefined, category: category }).then(\r\n                response => {\r\n                    if (response.error) {\r\n                        console.log(response.error);\r\n                    } else {\r\n                        setData({ ...data, results: response, searched: true });\r\n                    }\r\n                }\r\n            );\r\n        }\r\n    };\r\n\r\n    const searchSubmit = e => {\r\n        e.preventDefault();\r\n        searchData();\r\n    };\r\n\r\n    const handleChange = name => event => {\r\n        setData({ ...data, [name]: event.target.value, searched: false });\r\n    };\r\n\r\n    const searchMessage = (searched, results) => {\r\n        if (searched && results.length > 0) {\r\n            return `Found ${results.length} products`;\r\n        }\r\n        if (searched && results.length < 1) {\r\n            return `No products found`;\r\n        }\r\n    };\r\n\r\n    const searchedProducts = (results = []) => {\r\n        return (\r\n            <div>\r\n                <h2 className=\"mt-4 mb-4\">\r\n                    {searchMessage(searched, results)}\r\n                </h2>\r\n\r\n                <div className=\"row\">\r\n                    {results.map((train, i) => (\r\n                        <div className=\"col-4 mb-3\">\r\n                            <Card key={i} train={train} />\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const searchForm = () => (\r\n        <form onSubmit={searchSubmit}>\r\n            <span className=\"input-group-text\">\r\n                <div className=\"input-group input-group-lg\">\r\n                    <div className=\"input-group-prepend\">\r\n                        <select\r\n                            className=\"btn mr-2\"\r\n                            onChange={handleChange(\"category\")}\r\n                        >\r\n                            <option value=\"All\">All</option>\r\n                            {categories.map((c, i) => (\r\n                                <option key={i} value={c._id}>\r\n                                    {c.name}\r\n                                </option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n\r\n                    <input\r\n                        type=\"search\"\r\n                        className=\"form-control\"\r\n                        onChange={handleChange(\"search\")}\r\n                        placeholder=\"Search by name\"\r\n                    />\r\n                </div>\r\n                <div\r\n                    className=\"btn input-group-append\"\r\n                    style={{ border: \"none\" }}\r\n                >\r\n                    <button className=\"input-group-text\">Search</button>\r\n                </div>\r\n            </span>\r\n        </form>\r\n    );\r\n\r\n    return (\r\n        <div className=\"row\">\r\n            <div className=\"container mb-3\">{searchForm()}</div>\r\n            <div className=\"container-fluid mb-3\">\r\n                {searchedProducts(results)}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Search;","import React, { useState, useEffect } from 'react';\r\nimport Layout from './Layout';\r\nimport { getTrains } from './apiCore';\r\nimport Card from './Card';\r\nimport Search from './Search';\r\n\r\nconst Home = () => {\r\n    const [trainsBySell, setTrainsBySell] = useState([]);\r\n    const [trainsByArrival, setTrainsByArrival] = useState([]);\r\n    const [error, setError] = useState(false);\r\n\r\n    const loadTrainsBySell = () => {\r\n        getTrains('sold').then(data => {\r\n            if (data.error) {\r\n                setError(data.error);\r\n            } else {\r\n                setTrainsBySell(data);\r\n            }\r\n        });\r\n    };\r\n\r\n    const loadTrainsByArrival = () => {\r\n        getTrains('createdAt').then(data => {\r\n            console.log(data);\r\n            if (data.error) {\r\n                setError(data.error);\r\n            } else {\r\n                setTrainsByArrival(data);\r\n            }\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        loadTrainsBySell();\r\n        loadTrainsByArrival();\r\n    }, []);\r\n\r\n    return (\r\n        <Layout\r\n            title=\"FullStack React Node MongoDB Ecommerce App\"\r\n            description=\"Node React E-commerce App\"\r\n            className=\"container-fluid\"\r\n        >\r\n            <Search />\r\n            <h2 className=\"mb-4\">Top Sellers</h2>\r\n            <div className=\"row\">\r\n                {trainsByArrival.map((train, i) => (\r\n                    <div key={i} className=\"col-4 mb-3\">\r\n                        <Card train={train} />\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default Home;","\r\nimport React, { Component } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { isAuthenticated } from \"./index\";\r\n\r\nconst PrivateRoute = ({ component: Component, ...rest }) => (\r\n    <Route\r\n        {...rest}\r\n        render={props =>\r\n            isAuthenticated() ? (\r\n                <Component {...props} />\r\n            ) : (\r\n                <Redirect\r\n                    to={{\r\n                        pathname: \"/signin\",\r\n                        state: { from: props.location }\r\n                    }}\r\n                />\r\n            )\r\n        }\r\n    />\r\n);\r\n\r\nexport default PrivateRoute;","import React from \"react\";\r\nimport Layout from \"../core/Layout\";\r\nimport {isAuthenticated} from \"../auth\"\r\nimport {Link} from \"react-router-dom\";\r\n\r\nconst Dashboard = () => {\r\n    const {user: {_id,name,email,role}} = isAuthenticated()\r\n\r\n    const userLinks = () => {\r\n        return(\r\n            <div className=\"card\">\r\n                <h4 className=\"card_header\">User Links</h4>\r\n                <ul className=\"list-group\">\r\n                    <li className=\"list-group-item\">\r\n                        <Link className=\"nav-link\" to=\"/cart\">My Cart</Link>\r\n                    </li>\r\n                    <li className=\"list-group-item\">\r\n                        <Link className=\"nav-link\" to=\"/profile/update\">Update Profile</Link>\r\n                    </li>\r\n                    <li className=\"list-group-item\">{role ===1 ? \"Admin\" : \"Registered User\"}</li>\r\n                </ul>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const userInfo = () => {\r\n        return(\r\n            <div className=\"card mb-5\">\r\n                <h3 className=\"card-header\">User Information</h3>\r\n                <ul className=\"list-group\">\r\n                    <li className=\"list-group-item\">{name}</li>\r\n                    <li className=\"list-group-item\">{email}</li>\r\n                    <li className=\"list-group-item\">{role ===1 ? \"Admin\" : \"Registered User\"}</li>\r\n                </ul>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const purchaseHistory = () => {\r\n        return(\r\n            <div className=\"card\">\r\n                <h3 className=\"card-header\">Purchase history</h3>\r\n                <ul className=\"list-group\">\r\n                    <li className=\"list-group-item\">history</li>\r\n                </ul>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return(\r\n        <Layout title=\"Dashboard\" description=\"User Dashboard\" className=\"container-fluid\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-3\">\r\n                        {userLinks()}\r\n                    </div>\r\n                    <div className=\"col-9\">\r\n                        {userInfo()}\r\n                        {purchaseHistory()}\r\n                    </div>\r\n                </div>\r\n        </Layout>\r\n    )\r\n}\r\n\r\nexport default Dashboard","import React, { Component } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { isAuthenticated } from \"./index\";\r\n\r\nconst AdminRoute = ({ component: Component, ...rest }) => (\r\n    <Route\r\n        {...rest}\r\n        render={props =>\r\n            isAuthenticated() && isAuthenticated().user.role === 1 ? (\r\n                <Component {...props} />\r\n            ) : (\r\n                <Redirect\r\n                    to={{\r\n                        pathname: \"/signin\",\r\n                        state: { from: props.location }\r\n                    }}\r\n                />\r\n            )\r\n        }\r\n    />\r\n);\r\n\r\nexport default AdminRoute;","import React from \"react\";\r\nimport Layout from \"../core/Layout\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst AdminDashboard = () => {\r\n    const {\r\n        user: { _id, name, email, role }\r\n    } = isAuthenticated();\r\n\r\n    const adminLinks = () => {\r\n        return (\r\n            <div className=\"card\">\r\n                <h4 className=\"card-header\">Admin Links</h4>\r\n                <ul className=\"list-group\">\r\n                    <li className=\"list-group-item\">\r\n                        <Link className=\"nav-link\" to=\"/create/category\">\r\n                            Create Category\r\n                        </Link>\r\n                    </li>\r\n                    <li className=\"list-group-item\">\r\n                        <Link className=\"nav-link\" to=\"/create/train\">\r\n                            Create Product\r\n                        </Link>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const adminInfo = () => {\r\n        return (\r\n            <div className=\"card mb-5\">\r\n                <h3 className=\"card-header\">User Information</h3>\r\n                <ul className=\"list-group\">\r\n                    <li className=\"list-group-item\">{name}</li>\r\n                    <li className=\"list-group-item\">{email}</li>\r\n                    <li className=\"list-group-item\">\r\n                        {role === 1 ? \"Admin\" : \"Registered User\"}\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <Layout\r\n            title=\"Dashboard\"\r\n            description={`G'day ${name}!`}\r\n            className=\"container-fluid\"\r\n        >\r\n            <div className=\"row\">\r\n                <div className=\"col-3\">{adminLinks()}</div>\r\n                <div className=\"col-9\">{adminInfo()}</div>\r\n            </div>\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default AdminDashboard;","import React, { useState } from \"react\";\r\nimport Layout from \"../core/Layout\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { createCategory } from \"./apiAdmin\";\r\n\r\nconst AddCategory = () => {\r\n    const [name, setName] = useState(\"\");\r\n    const [error, setError] = useState(false);\r\n    const [success, setSuccess] = useState(false);\r\n\r\n    // destructure user and token from localstorage\r\n    const { user, token } = isAuthenticated();\r\n\r\n    const handleChange = e => {\r\n        setError(\"\");\r\n        setName(e.target.value);\r\n    };\r\n\r\n    const clickSubmit = e => {\r\n        e.preventDefault();\r\n        setError(\"\");\r\n        setSuccess(false);\r\n        // make request to api to create category\r\n        createCategory(user._id, token, { name }).then(data => {\r\n            if (data.error) {\r\n                setError(data.error);\r\n            } else {\r\n                setError(\"\");\r\n                setSuccess(true);\r\n            }\r\n        });\r\n    };\r\n\r\n    const newCategoryFom = () => (\r\n        <form onSubmit={clickSubmit}>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Name</label>\r\n                <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    onChange={handleChange}\r\n                    value={name}\r\n                    autoFocus\r\n                    required\r\n                />\r\n            </div>\r\n            <button className=\"btn btn-outline-primary\">Create Category</button>\r\n        </form>\r\n    );\r\n\r\n    const showSuccess = () => {\r\n        if (success) {\r\n            return <h3 className=\"text-success\">{name} is created</h3>;\r\n        }\r\n    };\r\n\r\n    const showError = () => {\r\n        if (error) {\r\n            return <h3 className=\"text-danger\">Category should be unique</h3>;\r\n        }\r\n    };\r\n\r\n    const goBack = () => (\r\n        <div className=\"mt-5\">\r\n            <Link to=\"/admin/dashboard\" className=\"text-warning\">\r\n                Back to Dashboard\r\n            </Link>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <Layout\r\n            title=\"Add a new category\"\r\n            description={`G'day ${user.name}, ready to add a new category?`}\r\n        >\r\n            <div className=\"row\">\r\n                <div className=\"col-md-8 offset-md-2\">\r\n                    {showSuccess()}\r\n                    {showError()}\r\n                    {newCategoryFom()}\r\n                    {goBack()}\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default AddCategory;","import { API } from '../Config';\r\n\r\nexport const createCategory = (userId, token, category) => {\r\n    return fetch(`${API}/category/create/${userId}`, {\r\n        method: 'POST',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            'Content-Type': 'application/json',\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(category)\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        });\r\n};\r\n\r\nexport const createTrain = (userId, token, train) => {\r\n    return fetch(`${API}/train/create/${userId}`, {\r\n        method: 'POST',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: train\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        });\r\n};\r\n\r\nexport const getCategories = () => {\r\n    return fetch(`${API}/categories`, {\r\n        method: 'GET'\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};","import React, { useState, useEffect } from 'react';\r\nimport Layout from '../core/Layout';\r\nimport { isAuthenticated } from '../auth';\r\nimport { Link } from 'react-router-dom';\r\nimport { createTrain, getCategories } from './apiAdmin';\r\n\r\nconst AddTrain = () => {\r\n    const [values, setValues] = useState({\r\n        name: '',\r\n        categories: [],\r\n        departFrom: '',\r\n        destination: '',\r\n        depatureDate: '',\r\n        depatureTime: '',\r\n        arrivalDate: '',\r\n        arrivalTime: '',\r\n        noOfSeats: '',\r\n        price: '',\r\n        photo: '',\r\n        loading: false,\r\n        error: '',\r\n        createdTrain: '',\r\n        redirectToProfile: false,\r\n        formData: ''\r\n    });\r\n\r\n    const { user, token } = isAuthenticated();\r\n    const {\r\n        name,\r\n        categories,\r\n        category,\r\n        departFrom,\r\n        destination,\r\n        depatureDate,\r\n        depatureTime,\r\n        arrivalDate,\r\n        arrivalTime,\r\n        noOfSeats,\r\n        price,\r\n        loading,\r\n        error,\r\n        createdTrain,\r\n        redirectToProfile,\r\n        formData\r\n    } = values;\r\n\r\n    // load categories and set form data\r\n    const init = () => {\r\n        getCategories().then(data => {\r\n            if (data.error) {\r\n                setValues({ ...values, error: data.error });\r\n            } else {\r\n                setValues({\r\n                    ...values,\r\n                    categories: data,\r\n                    formData: new FormData()\r\n                });\r\n            }\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        init();\r\n    }, []);\r\n\r\n    const handleChange = name => event => {\r\n        const value = name === 'photo' ? event.target.files[0] : event.target.value;\r\n        formData.set(name, value);\r\n        setValues({ ...values, [name]: value });\r\n    };\r\n\r\n    const clickSubmit = event => {\r\n        event.preventDefault();\r\n        setValues({ ...values, error: '', loading: true });\r\n\r\n        createTrain(user._id, token, formData).then(data => {\r\n            if (data.error) {\r\n                setValues({ ...values, error: data.error });\r\n            } else {\r\n                setValues({\r\n                    ...values,\r\n                    name: '',\r\n                    description: '',\r\n                    photo: '',\r\n                    price: '',\r\n                    quantity: '',\r\n                    loading: false,\r\n                    createdTrain: data.name\r\n                });\r\n            }\r\n        });\r\n    };\r\n\r\n    const newPostForm = () => (\r\n        <form className=\"mb-3\" onSubmit={clickSubmit}>\r\n            <h4>Post Photo</h4>\r\n            <div className=\"form-group\">\r\n                <label className=\"btn btn-secondary\">\r\n                    <input onChange={handleChange('photo')} type=\"file\" name=\"photo\" accept=\"image/*\" />\r\n                </label>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Name</label>\r\n                <input onChange={handleChange('name')} type=\"text\" className=\"form-control\" value={name} />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Category</label>\r\n                <select onChange={handleChange('category')} className=\"form-control\">\r\n                    <option>Please select</option>\r\n                    {categories &&\r\n                    categories.map((c, i) => (\r\n                        <option key={i} value={c._id}>\r\n                            {c.name}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Depart From</label>\r\n                <input onChange={handleChange('departFrom')} type=\"text\" className=\"form-control\" value={departFrom} />\r\n            </div>\r\n\r\n            <div className=\"row\">\r\n                <div className=\"col-6\">\r\n                    <div className=\"form-group\">\r\n                        <label className=\"text-muted\">Depature Date</label>\r\n                        <input onChange={handleChange('depatureDate')} type=\"date\" className=\"form-control\" value={depatureDate} />\r\n                    </div>\r\n                </div>\r\n                <div className=\"col-6\">\r\n                    <div className=\"form-group\">\r\n                        <label className=\"text-muted\">Depature Time</label>\r\n                        <input onChange={handleChange('depatureTime')} type=\"time\" className=\"form-control\" value={depatureTime} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Destination</label>\r\n                <input onChange={handleChange('destination')} type=\"text\" className=\"form-control\" value={destination} />\r\n            </div>\r\n\r\n            <div className=\"row\">\r\n                <div className=\"col-6\">\r\n                    <div className=\"form-group\">\r\n                        <label className=\"text-muted\">Arrival Date</label>\r\n                        <input onChange={handleChange('arrivalDate')} type=\"date\" className=\"form-control\" value={arrivalDate} />\r\n                    </div>\r\n                </div>\r\n                <div className=\"col-6\">\r\n                    <div className=\"form-group\">\r\n                        <label className=\"text-muted\">Arrival Time</label>\r\n                        <input onChange={handleChange('arrivalTime')} type=\"time\" className=\"form-control\" value={arrivalTime} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Number of seats</label>\r\n                <input onChange={handleChange('noOfSeats')} type=\"number\" className=\"form-control\" value={noOfSeats} />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Price</label>\r\n                <input onChange={handleChange('price')} type=\"number\" className=\"form-control\" value={price} />\r\n            </div>\r\n\r\n            <button className=\"btn btn-primary btn-lg btn-block\">Create Train</button>\r\n        </form>\r\n    );\r\n\r\n    const showError = () => (\r\n        <div className=\"alert alert-danger\" style={{ display: error ? '' : 'none' }}>\r\n            {error}\r\n        </div>\r\n    );\r\n\r\n    const showSuccess = () => (\r\n        <div className=\"alert alert-info\" style={{ display: createdTrain ? '' : 'none' }}>\r\n            <h2>{`${createdTrain}`} is created!</h2>\r\n        </div>\r\n    );\r\n\r\n    const showLoading = () =>\r\n        loading && (\r\n            <div className=\"alert alert-success\">\r\n                <h2>Loading...</h2>\r\n            </div>\r\n        );\r\n\r\n    return (\r\n        <Layout title=\"Add a new product\" description={`G'day ${user.name}, ready to add a new product?`}>\r\n            <div className=\"row\">\r\n                <div className=\"col-md-8 offset-md-2\">\r\n                    {showLoading()}\r\n                    {showSuccess()}\r\n                    {showError()}\r\n                    {newPostForm()}\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default AddTrain;","import React, { useState } from \"react\";\r\n\r\nconst Checkbox = ({ categories, handleFilters }) => {\r\n    const [checked, setCheked] = useState([]);\r\n\r\n    const handleToggle = c => () => {\r\n        // return the first index or -1\r\n        const currentCategoryId = checked.indexOf(c);\r\n        const newCheckedCategoryId = [...checked];\r\n        // if currently checked was not already in checked state > push\r\n        // else pull/take off\r\n        if (currentCategoryId === -1) {\r\n            newCheckedCategoryId.push(c);\r\n        } else {\r\n            newCheckedCategoryId.splice(currentCategoryId, 1);\r\n        }\r\n        // console.log(newCheckedCategoryId);\r\n        setCheked(newCheckedCategoryId);\r\n        handleFilters(newCheckedCategoryId);\r\n    };\r\n\r\n    return categories.map((c, i) => (\r\n        <li key={i} className=\"list-unstyled\">\r\n            <input\r\n                onChange={handleToggle(c._id)}\r\n                value={checked.indexOf(c._id === -1)}\r\n                type=\"checkbox\"\r\n                className=\"form-check-input\"\r\n            />\r\n            <label className=\"form-check-label\">{c.name}</label>\r\n        </li>\r\n    ));\r\n};\r\n\r\nexport default Checkbox;","import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"./Layout\";\r\nimport Card from \"./Card\";\r\nimport { getCategories, getFilteredTrains,getDepature } from \"./apiCore\";\r\nimport Checkbox from \"./Checkbox\";\r\nimport RadioBox from \"./RadioBox\";\r\nimport { prices } from \"./fixedPrices\";\r\n\r\nconst Shop = () => {\r\n    const [myFilters, setMyFilters] = useState({\r\n        filters: { category: [], price: [], depature: [] }\r\n    });\r\n    const [categories, setCategories] = useState([]);\r\n    const [error, setError] = useState(false);\r\n    const [limit, setLimit] = useState(6);\r\n    const [skip, setSkip] = useState(0);\r\n    const [size, setSize] = useState(0);\r\n    const [filteredResults, setFilteredResults] = useState([]);\r\n\r\n    const init = () => {\r\n        getCategories().then(data => {\r\n            if (data.error) {\r\n                setError(data.error);\r\n            } else {\r\n                setCategories(data);\r\n            }\r\n        });\r\n    };\r\n\r\n    const loadFilteredResults = newFilters => {\r\n        // console.log(newFilters);\r\n        getFilteredTrains(skip, limit, newFilters).then(data => {\r\n            if (data.error) {\r\n                setError(data.error);\r\n            } else {\r\n                setFilteredResults(data.data);\r\n                setSize(data.size);\r\n                setSkip(0);\r\n            }\r\n        });\r\n    };\r\n\r\n    const loadMore = () => {\r\n        let toSkip = skip + limit;\r\n        // console.log(newFilters);\r\n        getFilteredTrains(toSkip, limit, myFilters.filters).then(data => {\r\n            if (data.error) {\r\n                setError(data.error);\r\n            } else {\r\n                setFilteredResults([...filteredResults, ...data.data]);\r\n                setSize(data.size);\r\n                setSkip(toSkip);\r\n            }\r\n        });\r\n    };\r\n\r\n    const loadMoreButton = () => {\r\n        return (\r\n            size > 0 &&\r\n            size >= limit && (\r\n                <button onClick={loadMore} className=\"btn btn-warning mb-5\">\r\n                    Load more\r\n                </button>\r\n            )\r\n        );\r\n    };\r\n\r\n    useEffect(() => {\r\n        init();\r\n        loadFilteredResults(skip, limit, myFilters.filters);\r\n    }, []);\r\n\r\n    const handleFilters = (filters, filterBy) => {\r\n        // console.log(\"SHOP\", filters, filterBy);\r\n        const newFilters = { ...myFilters };\r\n        newFilters.filters[filterBy] = filters;\r\n\r\n        if (filterBy === \"price\") {\r\n            let priceValues = handlePrice(filters);\r\n            newFilters.filters[filterBy] = priceValues;\r\n        }\r\n        loadFilteredResults(myFilters.filters);\r\n        setMyFilters(newFilters);\r\n    };\r\n\r\n    const handlePrice = value => {\r\n        const data = prices;\r\n        let array = [];\r\n\r\n        for (let key in data) {\r\n            if (data[key]._id === parseInt(value)) {\r\n                array = data[key].array;\r\n            }\r\n        }\r\n        return array;\r\n    };\r\n\r\n    return (\r\n        <Layout\r\n            title=\"Shop Page\"\r\n            description=\"Search and find books of your choice\"\r\n            className=\"container-fluid\"\r\n        >\r\n            <div className=\"row\">\r\n                <div className=\"col-4\">\r\n                    <h4>Filter by categories</h4>\r\n                    <ul>\r\n                        <Checkbox\r\n                            categories={categories}\r\n                            handleFilters={filters =>\r\n                                handleFilters(filters, \"category\")\r\n                            }\r\n                        />\r\n                    </ul>\r\n                    <div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"col-8\">\r\n                    <h2 className=\"mb-4\">Trains</h2>\r\n                    <div className=\"row\">\r\n                        {filteredResults.map((train, i) => (\r\n                            <div key={i} className=\"col-4 mb-3\">\r\n                                <Card train={train} />\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                    <hr />\r\n                    {loadMoreButton()}\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default Shop;","import React, { useState, useEffect } from 'react';\r\nimport Layout from './Layout';\r\nimport { read, listRelated } from './apiCore';\r\nimport Card from './Card';\r\n\r\nconst Train = props => {\r\n    const [train, setTrain] = useState({});\r\n    const [relatedTrain, setRelatedTrain] = useState([]);\r\n    const [error, setError] = useState(false);\r\n\r\n    const loadSingleTrain = trainId => {\r\n        read(trainId).then(data => {\r\n            if (data.error) {\r\n                setError(data.error);\r\n            } else {\r\n                setTrain(data);\r\n                // fetch related products\r\n                listRelated(data._id).then(data => {\r\n                    if (data.error) {\r\n                        setError(data.error);\r\n                    } else {\r\n                        setRelatedTrain(data);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        const trainId = props.match.params.trainId;\r\n        loadSingleTrain(trainId);\r\n    }, [props]);\r\n\r\n    return (\r\n        <Layout\r\n            title={train && train.name}\r\n            description={train && train.description && train.description.substring(0, 100)}\r\n            className=\"container-fluid\"\r\n        >\r\n            <div className=\"row\">\r\n                <div className=\"col-4\"  style={{marginLeft:\"35%\"}}>\r\n                    {train && train.price && <Card train={train} showViewTrainButton={false} />}\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default Train;","import React, { useState, useEffect } from 'react';\r\nimport { getTrains, getBraintreeClientToken, processPayment, createOrder } from './apiCore';\r\nimport { emptyCart } from './cartHelperss';\r\nimport Card from './Card';\r\nimport { isAuthenticated } from '../auth';\r\nimport { Link } from 'react-router-dom';\r\nimport \"braintree-web\";\r\nimport DropIn from 'braintree-web-drop-in-react'\r\n\r\nconst Checkout = ({ trains, setRun = f => f, run = undefined }) => {\r\n    const [data, setData] = useState({\r\n        loading: false,\r\n        success: false,\r\n        clientToken: null,\r\n        error: '',\r\n        instance: {},\r\n        address: ''\r\n    });\r\n\r\n    const userId = isAuthenticated() && isAuthenticated().user._id;\r\n    const token = isAuthenticated() && isAuthenticated().token;\r\n\r\n    const getToken = (userId, token) => {\r\n        getBraintreeClientToken(userId, token).then(data => {\r\n            if (data.error) {\r\n                console.log(data.error);\r\n                setData({ ...data, error: data.error });\r\n            } else {\r\n                console.log(data);\r\n                setData({ clientToken: data.clientToken });\r\n            }\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        getToken(userId, token);\r\n    }, []);\r\n\r\n    const handleAddress = event => {\r\n        setData({ ...data, address: event.target.value });\r\n    };\r\n\r\n    const getTotal = () => {\r\n        return trains.reduce((currentValue, nextValue) => {\r\n            return currentValue + nextValue.count * nextValue.price;\r\n        }, 0);\r\n    };\r\n\r\n    const showCheckout = () => {\r\n        return isAuthenticated() ? (\r\n            <div>{showDropIn()}</div>\r\n        ) : (\r\n            <Link to=\"/signin\">\r\n                <button className=\"btn btn-primary\">Sign in to checkout</button>\r\n            </Link>\r\n        );\r\n    };\r\n\r\n    let deliveryAddress = data.address;\r\n\r\n    const buy = () => {\r\n        setData({ loading: true });\r\n        // send the nonce to your server\r\n        // nonce = data.instance.requestPaymentMethod()\r\n        let nonce;\r\n        let getNonce = data.instance\r\n            .requestPaymentMethod()\r\n            .then(data => {\r\n                // console.log(data);\r\n                nonce = data.nonce;\r\n                // once you have nonce (card type, card number) send nonce as 'paymentMethodNonce'\r\n                // and also total to be charged\r\n                // console.log(\r\n                //     \"send nonce and total to process: \",\r\n                //     nonce,\r\n                //     getTotal(products)\r\n                // );\r\n                const paymentData = {\r\n                    paymentMethodNonce: nonce,\r\n                    amount: getTotal(trains)\r\n                };\r\n\r\n                processPayment(userId, token, paymentData)\r\n                    .then(response => {\r\n                        console.log(response);\r\n                        // empty cart\r\n                        // create order\r\n\r\n                        const createOrderData = {\r\n                            products: trains,\r\n                            transaction_id: response.transaction.id,\r\n                            amount: response.transaction.amount,\r\n                            address: deliveryAddress\r\n                        };\r\n\r\n                        createOrder(userId, token, createOrderData)\r\n                            .then(response => {\r\n                                emptyCart(() => {\r\n                                    setRun(!run); // run useEffect in parent Cart\r\n                                    console.log('payment success and empty cart');\r\n                                    setData({\r\n                                        loading: false,\r\n                                        success: true\r\n                                    });\r\n                                });\r\n                            })\r\n                            .catch(error => {\r\n                                console.log(error);\r\n                                setData({ loading: false });\r\n                            });\r\n                    })\r\n                    .catch(error => {\r\n                        console.log(error);\r\n                        setData({ loading: false });\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                // console.log(\"dropin error: \", error);\r\n                setData({ ...data, error: error.message });\r\n            });\r\n    };\r\n\r\n    const showDropIn = () => (\r\n        <div onBlur={() => setData({ ...data, error: '' })}>\r\n            {data.clientToken !== null && trains.length > 0 ? (\r\n                <div>\r\n                    <div className=\"form-group mb-3\">\r\n                        <label className=\"text-muted\">Delivery address:</label>\r\n                        <textarea\r\n                            onChange={handleAddress}\r\n                            className=\"form-control\"\r\n                            value={data.address}\r\n                            placeholder=\"Type your delivery address here...\"\r\n                        />\r\n                        <DropIn/>\r\n                    </div>\r\n\r\n                    <DropIn\r\n                        options={{\r\n                            authorization: data.clientToken,\r\n                            paypal: {\r\n                                flow: 'vault'\r\n                            }\r\n                        }}\r\n                        onInstance={instance => (data.instance = instance)}\r\n                    />\r\n                    <button onClick={buy} className=\"btn btn-success btn-block\">\r\n                        Pay\r\n                    </button>\r\n                </div>\r\n            ) : null}\r\n        </div>\r\n    );\r\n\r\n    const showError = error => (\r\n        <div className=\"alert alert-danger\" style={{ display: error ? '' : 'none' }}>\r\n            {error}\r\n        </div>\r\n    );\r\n\r\n    const showSuccess = success => (\r\n        <div className=\"alert alert-info\" style={{ display: success ? '' : 'none' }}>\r\n            Thanks! Your payment was successful!\r\n        </div>\r\n    );\r\n\r\n    const showLoading = loading => loading && <h2 className=\"text-danger\">Loading...</h2>;\r\n\r\n    return (\r\n        <div>\r\n            <h2>Total: ${getTotal()}</h2>\r\n            {showLoading(data.loading)}\r\n            {showSuccess(data.success)}\r\n            {showError(data.error)}\r\n            {showCheckout()}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Checkout;","import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Layout from './Layout';\r\nimport { getCart } from './cartHelperss';\r\nimport Card from './Card';\r\nimport Checkout from './Checkout';\r\n\r\nconst Cart = () => {\r\n    const [items, setItems] = useState([]);\r\n    const [run, setRun] = useState(false);\r\n\r\n    useEffect(() => {\r\n        setItems(getCart());\r\n    }, [run]);\r\n\r\n    const showItems = items => {\r\n        return (\r\n            <div>\r\n                <h2>Your cart has {`${items.length}`} items</h2>\r\n                <hr />\r\n                {items.map((train, i) => (\r\n                    <Card\r\n                        key={1}\r\n                        train={train}\r\n                        showAddToCartButton={false}\r\n                        cartUpdate={true}\r\n                        showRemoveProductButton={true}\r\n                        setRun={setRun}\r\n                        run={run}\r\n                    />\r\n                ))}\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const noItemsMessage = () => (\r\n        <h2>\r\n            No Tcikets found <br /> <Link to=\"/shop\">Buy tickets</Link>\r\n        </h2>\r\n    );\r\n\r\n    return (\r\n        <Layout\r\n            title=\"Shopping Cart\"\r\n            description=\"Manage your cart items. Add remove checkout or continue shopping.\"\r\n            className=\"container-fluid\"\r\n        >\r\n            <div className=\"row\">\r\n                <div className=\"col-6\">{items.length > 0 ? showItems(items) : noItemsMessage()}</div>\r\n\r\n                <div className=\"col-6\">\r\n                    <h2 className=\"mb-4\">Your cart summary</h2>\r\n                    <hr />\r\n                    <Checkout trains={items} setRun={setRun} run={run} />\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default Cart;","import React from 'react';\r\nimport { BrowserRouter, Switch, Route } from 'react-router-dom';\r\nimport Signup from './user/Signup';\r\nimport Signin from './user/Signin';\r\nimport Home from './core/Home';\r\nimport PrivateRoute from './auth/PrivateRoute';\r\nimport Dashboard from './user/UserDashboard';\r\nimport AdminRoute from './auth/AdminRoute';\r\nimport AdminDashboard from './user/AdminDashboard';\r\nimport AddCategory from './admin/AddCategory';\r\nimport AddTrain from './admin/AddTrain';\r\nimport Shop from './core/Shop';\r\nimport Train from './core/Train';\r\nimport Cart from './core/Cart';\r\n//import ManageTrains from './admin/ManageTrains';\r\n//import UpdateTrain from './admin/UpdateTrain';\r\n//import UpdateCategory from './admin/updateCategory';\r\n\r\nconst Routes = () => {\r\n    return (\r\n        <BrowserRouter>\r\n            <Switch>\r\n                <Route path=\"/\" exact component={Home} />\r\n                <Route path=\"/shop\" exact component={Shop} />\r\n                <Route path=\"/signin\" exact component={Signin} />\r\n                <Route path=\"/signup\" exact component={Signup} />\r\n                <PrivateRoute path=\"/user/dashboard\" exact component={Dashboard} />\r\n                <AdminRoute path=\"/admin/dashboard\" exact component={AdminDashboard} />\r\n                <AdminRoute path=\"/category/create\" exact component={AddCategory} />\r\n                <AdminRoute path=\"/create/train\" exact component={AddTrain} />\r\n                <Route path=\"/train/:trainId\" exact component={Train} />\r\n                <Route path=\"/cart\" exact component={Cart} />\r\n\r\n            </Switch>\r\n        </BrowserRouter>\r\n    );\r\n};\r\n\r\nexport default Routes;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Routes from './Routes';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Routes />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n"],"sourceRoot":""}